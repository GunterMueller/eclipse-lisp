%!PS-Adobe-2.0
%%Creator: dvipsk 5.58f Copyright 1986, 1994 Radical Eye Software
%%Title: javaScheme.dvi
%%Pages: 9
%%PageOrder: Ascend
%%BoundingBox: 0 0 612 792
%%DocumentFonts: Times-Roman Times-Bold Times-Italic Times-BoldItalic
%%EndComments
%DVIPSCommandLine: dvips -o javaScheme.ps javaScheme.dvi
%DVIPSParameters: dpi=600, compressed, comments removed
%DVIPSSource:  TeX output 1996.04.26:0457
%%BeginProcSet: texc.pro
/TeXDict 250 dict def TeXDict begin /N{def}def /B{bind def}N /S{exch}N
/X{S N}B /TR{translate}N /isls false N /vsize 11 72 mul N /hsize 8.5 72
mul N /landplus90{false}def /@rigin{isls{[0 landplus90{1 -1}{-1 1}
ifelse 0 0 0]concat}if 72 Resolution div 72 VResolution div neg scale
isls{landplus90{VResolution 72 div vsize mul 0 exch}{Resolution -72 div
hsize mul 0}ifelse TR}if Resolution VResolution vsize -72 div 1 add mul
TR[matrix currentmatrix{dup dup round sub abs 0.00001 lt{round}if}
forall round exch round exch]setmatrix}N /@landscape{/isls true N}B
/@manualfeed{statusdict /manualfeed true put}B /@copies{/#copies X}B
/FMat[1 0 0 -1 0 0]N /FBB[0 0 0 0]N /nn 0 N /IE 0 N /ctr 0 N /df-tail{
/nn 8 dict N nn begin /FontType 3 N /FontMatrix fntrx N /FontBBox FBB N
string /base X array /BitMaps X /BuildChar{CharBuilder}N /Encoding IE N
end dup{/foo setfont}2 array copy cvx N load 0 nn put /ctr 0 N[}B /df{
/sf 1 N /fntrx FMat N df-tail}B /dfs{div /sf X /fntrx[sf 0 0 sf neg 0 0]
N df-tail}B /E{pop nn dup definefont setfont}B /ch-width{ch-data dup
length 5 sub get}B /ch-height{ch-data dup length 4 sub get}B /ch-xoff{
128 ch-data dup length 3 sub get sub}B /ch-yoff{ch-data dup length 2 sub
get 127 sub}B /ch-dx{ch-data dup length 1 sub get}B /ch-image{ch-data
dup type /stringtype ne{ctr get /ctr ctr 1 add N}if}B /id 0 N /rw 0 N
/rc 0 N /gp 0 N /cp 0 N /G 0 N /sf 0 N /CharBuilder{save 3 1 roll S dup
/base get 2 index get S /BitMaps get S get /ch-data X pop /ctr 0 N ch-dx
0 ch-xoff ch-yoff ch-height sub ch-xoff ch-width add ch-yoff
setcachedevice ch-width ch-height true[1 0 0 -1 -.1 ch-xoff sub ch-yoff
.1 sub]/id ch-image N /rw ch-width 7 add 8 idiv string N /rc 0 N /gp 0 N
/cp 0 N{rc 0 ne{rc 1 sub /rc X rw}{G}ifelse}imagemask restore}B /G{{id
gp get /gp gp 1 add N dup 18 mod S 18 idiv pl S get exec}loop}B /adv{cp
add /cp X}B /chg{rw cp id gp 4 index getinterval putinterval dup gp add
/gp X adv}B /nd{/cp 0 N rw exit}B /lsh{rw cp 2 copy get dup 0 eq{pop 1}{
dup 255 eq{pop 254}{dup dup add 255 and S 1 and or}ifelse}ifelse put 1
adv}B /rsh{rw cp 2 copy get dup 0 eq{pop 128}{dup 255 eq{pop 127}{dup 2
idiv S 128 and or}ifelse}ifelse put 1 adv}B /clr{rw cp 2 index string
putinterval adv}B /set{rw cp fillstr 0 4 index getinterval putinterval
adv}B /fillstr 18 string 0 1 17{2 copy 255 put pop}for N /pl[{adv 1 chg}
{adv 1 chg nd}{1 add chg}{1 add chg nd}{adv lsh}{adv lsh nd}{adv rsh}{
adv rsh nd}{1 add adv}{/rc X nd}{1 add set}{1 add clr}{adv 2 chg}{adv 2
chg nd}{pop nd}]dup{bind pop}forall N /D{/cc X dup type /stringtype ne{]
}if nn /base get cc ctr put nn /BitMaps get S ctr S sf 1 ne{dup dup
length 1 sub dup 2 index S get sf div put}if put /ctr ctr 1 add N}B /I{
cc 1 add D}B /bop{userdict /bop-hook known{bop-hook}if /SI save N @rigin
0 0 moveto /V matrix currentmatrix dup 1 get dup mul exch 0 get dup mul
add .99 lt{/QV}{/RV}ifelse load def pop pop}N /eop{SI restore userdict
/eop-hook known{eop-hook}if showpage}N /@start{userdict /start-hook
known{start-hook}if pop /VResolution X /Resolution X 1000 div /DVImag X
/IE 256 array N 0 1 255{IE S 1 string dup 0 3 index put cvn put}for
65781.76 div /vsize X 65781.76 div /hsize X}N /p{show}N /RMat[1 0 0 -1 0
0]N /BDot 260 string N /rulex 0 N /ruley 0 N /v{/ruley X /rulex X V}B /V
{}B /RV statusdict begin /product where{pop product dup length 7 ge{0 7
getinterval dup(Display)eq exch 0 4 getinterval(NeXT)eq or}{pop false}
ifelse}{false}ifelse end{{gsave TR -.1 .1 TR 1 1 scale rulex ruley false
RMat{BDot}imagemask grestore}}{{gsave TR -.1 .1 TR rulex ruley scale 1 1
false RMat{BDot}imagemask grestore}}ifelse B /QV{gsave newpath transform
round exch round exch itransform moveto rulex 0 rlineto 0 ruley neg
rlineto rulex neg 0 rlineto fill grestore}B /a{moveto}B /delta 0 N /tail
{dup /delta X 0 rmoveto}B /M{S p delta add tail}B /b{S p tail}B /c{-4 M}
B /d{-3 M}B /e{-2 M}B /f{-1 M}B /g{0 M}B /h{1 M}B /i{2 M}B /j{3 M}B /k{
4 M}B /w{0 rmoveto}B /l{p -4 w}B /m{p -3 w}B /n{p -2 w}B /o{p -1 w}B /q{
p 1 w}B /r{p 2 w}B /s{p 3 w}B /t{p 4 w}B /x{0 S rmoveto}B /y{3 2 roll p
a}B /bos{/SS save N}B /eos{SS restore}B end
%%EndProcSet
%%BeginFont: Times-Roman
% @psencodingfile{
%   author = "P. MacKay, Alan Jeffrey, S. Rahtz, K. Berry, B. Horn",
%   version = "0.2",
%   date = "7 September 94",
%   filename = "8r.enc",
%   email = "kb@cs.umb.edu",
%   address = "135 Center Hill Rd. // Plymouth, MA 02360",
%   codetable = "ISO/ASCII",
%   checksum = "xx",
%   docstring = "Encoding for TrueType or Type 1 fonts to be used with TeX."
% }
% 
% Idea is to have all the characters normally included in Type 1 fonts
% available for typesetting. This is effectively the characters in Adobe
% Standard Encoding + ISO Latin 1 + extra characters from Lucida.
% 
% Character code assignments were made as follows:
% 
% (1) the Windows ANSI characters are in their Windows ANSI positions,
% because Windows users cannot easily reencode the fonts, and it makes
% no difference on other systems. The only Windows ANSI characters not
% available are those that make no sense for typesetting -- rubout
% (127 decimal), nobreakspace (160), softhyphen (173).
% 
% (2) The caron and dotlessi characters are in the positions used by
% Y&Y for their modified ATM encoding.
% 
% (3) Remaining characters are assigned arbitrarily to the first few
% positions.
% 
% (4) (Y&Y) Lucida Bright includes some extra text characters; in the
% hopes that other PostScript fonts, perhaps created for public
% consumption, will include them, they are included starting at 0x10.
% 
% (5) Remaining positions left undefined are for use in (hopefully)
% upward-compatible revisions, if someday more characters are generally
% available in the Type 1 fonts.
% 
% Ligatures are omitted, since this encoding is intended for use at the
% driver end. Including ligatures and kerns would make the TFM files
% much larger, to no particular purpose. If someone actually wants to
% typeset in this encoding, they can pick a different name, and regenerate
% the fonts.
 
/TeXBase1Encoding [
% 0x00 (encoded characters from Adobe Standard not in Windows 3.1)
  /breve /dotaccent /fi /fl
  /fraction /hungarumlaut /Lslash /lslash
  /ogonek /ring /tilde /minus
  % These are the only two remaining unencoded characters, so may as
  % well include them.
  /Zcaron /zcaron /.notdef /.notdef
% 0x10 (TeX characters from, e.g., Lucida Bright)
 /dotlessj /ff /ffi /ffl /.notdef /.notdef /.notdef /.notdef
 /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef
% 0x20 (ASCII begins)
 /space /exclam /quotedbl /numbersign
 /dollar /percent /ampersand /quotesingle
 /parenleft /parenright /asterisk /plus /comma /hyphen /period /slash
% 0x30
 /zero /one /two /three /four /five /six /seven
 /eight /nine /colon /semicolon /less /equal /greater /question
% 0x40
 /at /A /B /C /D /E /F /G /H /I /J /K /L /M /N /O
% 0x50
 /P /Q /R /S /T /U /V /W
 /X /Y /Z /bracketleft /backslash /bracketright /asciicircum /underscore
% 0x60
 /grave /a /b /c /d /e /f /g /h /i /j /k /l /m /n /o
% 0x70
 /p /q /r /s /t /u /v /w
 /x /y /z /braceleft /bar /braceright /asciitilde
 /.notdef % rubout; ASCII ends
% 0x80
 /.notdef /.notdef /quotesinglbase /florin
 /quotedblbase /ellipsis /dagger /daggerdbl
 /circumflex /perthousand /Scaron /guilsinglleft
 /OE
 /caron % Y&Y
 /.notdef
 /.notdef
% 0x90
 /.notdef /quoteleft /quoteright /quotedblleft
 /quotedblright /bullet /endash /emdash
 /tildeaccent /trademark /scaron /guilsinglright
 /oe
 /dotlessi % Y&Y
 /.notdef
 /Ydieresis
% 0xA0
 /.notdef % nobreakspace
 /exclamdown /cent /sterling
 /currency /yen /brokenbar /section
 /dieresis /copyright /ordfeminine /guillemotleft
 /logicalnot
 /hyphen % Y&Y (also at 45); Windows' softhyphen
 /registered
 /macron
% 0xD0
 /degree /plusminus /twosuperior /threesuperior
 /acute /mu /paragraph /periodcentered
 /cedilla /onesuperior /ordmasculine /guillemotright
 /onequarter /onehalf /threequarters /questiondown
% 0xC0
 /Agrave /Aacute /Acircumflex /Atilde /Adieresis /Aring /AE /Ccedilla
 /Egrave /Eacute /Ecircumflex /Edieresis
 /Igrave /Iacute /Icircumflex /Idieresis
% 0xD0
 /Eth /Ntilde /Ograve /Oacute
 /Ocircumflex /Otilde /Odieresis /multiply
 /Oslash /Ugrave /Uacute /Ucircumflex
 /Udieresis /Yacute /Thorn /germandbls
% 0xE0
 /agrave /aacute /acircumflex /atilde
 /adieresis /aring /ae /ccedilla
 /egrave /eacute /ecircumflex /edieresis
 /igrave /iacute /icircumflex /idieresis
% 0xF0
 /eth /ntilde /ograve /oacute
 /ocircumflex /otilde /odieresis /divide
 /oslash /ugrave /uacute /ucircumflex
 /udieresis /yacute /thorn /ydieresis
] def
%%EndFont
%%BeginProcSet: texps.pro
TeXDict begin /rf{findfont dup length 1 add dict begin{1 index /FID ne 2
index /UniqueID ne and{def}{pop pop}ifelse}forall[1 index 0 6 -1 roll
exec 0 exch 5 -1 roll VResolution Resolution div mul neg 0 0]/Metrics
exch def dict begin Encoding{exch dup type /integertype ne{pop pop 1 sub
dup 0 le{pop}{[}ifelse}{FontMatrix 0 get div Metrics 0 get div def}
ifelse}forall Metrics /Metrics currentdict end def[2 index currentdict
end definefont 3 -1 roll makefont /setfont load]cvx def}def
/ObliqueSlant{dup sin S cos div neg}B /SlantFont{4 index mul add}def
/ExtendFont{3 -1 roll mul exch}def /ReEncodeFont{/Encoding exch def}def
end
%%EndProcSet
TeXDict begin 40258431 52099146 1000 600 600 (javaScheme.dvi)
@start /Fa 1 52 df<EB3FC03801FFF03807C0FC380E007E487FEC1F80003F14C0A2EB
800F1300A2000C131FC7FC1580A2EC3F00143E5C5CEB03F0EBFFC014F0EB00FC143FEC1F
8015C0140F15E0A2EC07F0A21238127C12FEA3EC0FE012F8006014C00070131F6C148000
1EEB3F00380780FC3801FFF038007FC01C2D7DAB23>51 D E /Fb
137[44 2[39 68[25 46[{TeXBase1Encoding ReEncodeFont}3
100.000003 /Times-BoldItalic rf /Fc 134[50 2[50 55 33
39 44 1[55 50 55 83 28 2[28 55 50 33 44 55 44 55 50 9[100
72 8[94 2[50 4[66 1[72 1[72 6[33 6[50 50 50 2[25 33 42[55
2[{TeXBase1Encoding ReEncodeFont}34 100.000003 /Times-Bold
rf /Fd 35 120 df<007FB612F0A2B712F8A36C15F0A225077B9E30>45
D<120FEA3FC0EA7FE0A2EAFFF0A4EA7FE0A2EA3FC0EA0F000C0C6E8B30>I<16F01501ED
03F8A21507A2ED0FF0A2ED1FE0A2ED3FC0A2ED7F80A2EDFF00A24A5AA25D1403A24A5AA2
4A5AA24A5AA24A5AA24A5AA24AC7FCA2495AA25C1303A2495AA2495AA2495AA2495AA249
5AA249C8FCA2485AA25B1203A2485AA2485AA2485AA2485AA2485AA248C9FCA25AA2127C
A225477BBE30>I<EB03FF013F13E090B512F84814FE4880481580260FFE0113C09038F0
007F4848EB1FE0150F16F01507A26C5A6C5AC8FC150F16E0A2151FED3FC0157FEDFF8002
071300903807FFFE495B5D8115FF6D1480D9000113C09138003FE0ED1FF0ED07F8150316
FC150116FE1500A21218127EB4FCA2150116FC4814036C15F86C6C13076DEB1FF0D83FF0
133F3A1FFE01FFE06CB612C06C15806CECFE00C65C013F13F001031380273A7CB830>51
D<127CB712FC16FEA416FC48C7EA0FF816F0ED1FE0007CEC3FC0C8EA7F80EDFF00A24A5A
4A5A5D14075D140F5D4A5AA24A5AA24AC7FCA25C5C13015CA213035CA213075CA4495AA6
131F5CA96D5A6DC8FC273A7CB830>55 D<120FEA3FC0EA7FE0A2EAFFF0A4EA7FE0A2EA3F
C0EA0F00C7FCAF120FEA3FC0EA7FE0A2EAFFF0A4EA7FE0A2EA3FC0EA0F000C276EA630>
58 D<EB1FFE90B512E0000314F8000F14FE4880481580267FF80313C09038C0007F48C7
121F16E0150FA3127E151F0018EC7FC0C812FF020313804A13004A5AEC1FF84A5AEC7FC0
4A5A92C7FC495AA2495A5CA213075CA86D5A90C9FCA8EB01C0EB07F0A2497EA36D5AA2EB
01C023397AB830>63 D<EC1FE0ECFFF8010313FE010F7F4914804914C090397FF03FE090
38FF800F4890380007F0D803FC13033A07F801FBF89038F007FF380FE01F4A13FCEA1FC0
495A003FEBFF0F903800FE07903901FC03FE007FEBF801EA7E03ECF000A2EAFE0700FC49
137EAA00FE6D13FED87E0314FCA2ECF801D87F0114F8003FEBFC03903900FE07F0903880
FF0F001F90387FFFE06D6C13C0EA0FE06E13803A07F007FE009038F801F86C6CC7127C6C
B414FE6CEB800390387FF01F6DB512FC6D14F86D14E0010314C00100EBFE00EC1FF0273A
7CB830>I<91387F803C903903FFF03E49EBFC7E011F13FE49EBFFFE5B9038FFE07F48EB
801F3903FE000F484813075B48481303A2484813015B123F491300A2127F90C8FC167C16
005A5AAC7E7EA2167C6D14FE123FA27F121F6D13016C6C14FCA26C6CEB03F86D13076C6C
EB0FF03901FF801F6C9038E07FE06DB512C06D14806D1400010713FC6D13F09038007FC0
273A7CB830>67 D<003FB512E04814FCB67E6F7E6C816C813A03F8007FF0ED1FF8150F6F
7E6F7E15016F7EA2EE7F80A2163F17C0161FA4EE0FE0AC161F17C0A3163F1780A2167F17
005E4B5A15034B5A150F4B5AED7FF0003FB65A485DB75A93C7FC6C14FC6C14E02B387FB7
30>I<007FB6FCB71280A46C1500260007F0C7FCB3B3A8007FB6FCB71280A46C15002138
79B730>73 D<383FFFF8487FB57EA26C5B6C5BD801FCC9FCB3B0EE0F80EE1FC0A9003FB7
FC5AB8FCA27E6C16802A387EB730>76 D<90383FFFE048B512FC000714FF4815804815C0
4815E0EBF80001E0133FD87F80EB0FF0A290C71207A44815F8481403B3A96C1407A26C15
F0A36D130FA26D131F6C6CEB3FE001F813FF90B6FC6C15C06C15806C1500000114FCD800
3F13E0253A7BB830>79 D<007FB512F0B612FE6F7E16E0826C813903F8003FED0FFCED03
FE15016F7EA2821780163FA6167F17005EA24B5A1503ED0FFCED3FF890B6FC5E5E16804B
C7FC15F001F8C9FCB0387FFFC0B57EA46C5B29387EB730>I<EB3FFC48B57E4814E04880
488048809038F00FFE9038E001FF806F7E6C48133F6C4880C8121FA491B5FC130F137F48
B6FC12075A48EBC01F383FFC00EA7FE0138048C7FC5AA46C143FA26C6C137F9038C001FF
263FF80FEBFFC06CB712E0A2000714F76C14C3C6020013C0D93FF090C7FC2B2A7CA830>
97 D<EA3FFC487E12FFA2127F123F1200AAEC03FE91381FFF80027F13E091B57E90B612
FC82ECFE079138F001FF4A6C13804A137F4AEB3FC091C7121F4915E0160FA217F01607A8
160FA217E07F161F6EEB3FC0A26EEB7F806E13FFDAF00313009138FC0FFE91B55A5E495C
D97E7F13C0D93C1F90C7FC90380003FC2C3980B730>I<ECFFE0010713FC011F7F017F7F
90B612804815C048EB807F3907FC003F485A485A49EB1F804848EB0F004990C7FC127F90
C9FCA25A5AA87E7EA27F003FEC07C06DEB0FE06C7E6D131F6C6C14C0D807FE133F9039FF
C0FF806C90B5FCC615006D5B011F13F801075B01011380232A7AA830>I<913801FFE04A
7F5CA28080EC0007AAEB03FE90381FFF874913E790B6FC5A5A481303380FFC00D81FF013
3F49131F485A150F4848130790C7FCA25AA25AA87E6C140FA27F003F141F6D133F6C7E6D
137F390FF801FF2607FE07EBFFC06CB712E06C16F06C14F76D01C713E0011F010313C0D9
07FCC8FC2C397DB730>I<49B4FC010713E0011F13F8017F7F90B57E488048018113803A
07FC007FC04848133FD81FE0EB1FE0150F484814F0491307127F90C7FCED03F85A5AB7FC
A516F048C9FC7E7EA27F003FEC01F06DEB03F86C7E6C7E6D1307D807FEEB1FF03A03FFC0
7FE06C90B5FC6C15C0013F14806DEBFE00010713F8010013C0252A7CA830>I<EDFF8002
0713E0021F13F05C4A13F891B5FC491387903803FE079138FC03F0903907F800C04A1300
A8003FB612C04815E0B7FCA36C15C0260007F0C7FCB3A9003FB512FE4880B71280A26C15
006C5C25397DB830>I<D903FC13FF90261FFF8713C04913DF90B712E05A5A2607FE0713
8F903AF801FE07C048486C6CC7FCA2497F001F8149133FA56D137F000F92C7FC6D5BA26C
6C485AEBFE0790B55A5D485C15C001DF5BD9C3FCC8FC01C0C9FCA37F7F6CB512F015FF6C
15C04815F0488148813A3FE0001FFE0180130148C8127F007E8100FE168048151FA56C15
3F007FED7F006D5C6C6C495A01F013076CB4EB7FFC6C90B55A6C5D000115C06C6C91C7FC
011F13FC010113C02B3E7DA730>I<EA3FFC487E12FFA2127F123F1200AAEC01FE91380F
FF80023F13E091B57E90B67EA29138FE07FCECF8039138E001FE14C0EC8000A291C7FCA2
5BB3A23B3FFFF81FFFF8486D4813FCB500FE14FEA26C01FC14FC6C496C13F82F3880B730
>I<14E0EB03F8A2497EA36D5AA2EB00E091C8FCA9381FFFF8487F5AA27E7EEA0001B3A9
003FB612C04815E0B7FCA27E6C15C023397AB830>I<EC01C0EC07F0A2EC0FF8A3EC07F0
A2EC01C091C7FCA990B512F04814F8A47EEB0003B3B3A5EC07F0A2123C007EEB0FE0B413
1FEC3FC0147F90B512806C14005C6C5B000F13F0000313C01D4E7CB830>I<387FFFF8B5
7EA47EEA0001B3B3A8007FB612F0B712F8A46C15F025387BB730>108
D<02FC137E3B7FC3FF01FF80D8FFEF01877F90B500CF7F15DF92B57E6C010F13872607FE
07EB03F801FC13FE9039F803FC01A201F013F8A301E013F0B3A23C7FFE0FFF07FF80B548
018F13C0A46C486C01071380322881A730>I<EC01FE3A3FFC0FFF80267FFE3F13E000FF
90B57E90B67E7E6C9038FE07FCC6EBF8039138E001FE14C0EC8000A291C7FCA25BB3A23B
3FFFF81FFFF8486D4813FCB500FE14FEA26C01FC14FC6C496C13F82F2880A730>I<49B4
FC010F13E0013F13F8497F90B57E0003ECFF8014013A07FC007FC04848EB3FE0D81FE0EB
0FF0A24848EB07F8491303007F15FC90C71201A300FEEC00FEA86C14016C15FCA26D1303
003F15F86D13076D130F6C6CEB1FF06C6CEB3FE06D137F3A07FF01FFC06C90B512806C15
006C6C13FC6D5B010F13E0010190C7FC272A7CA830>I<EC03FE3A3FFC1FFF80267FFE7F
13E000FF90B57E90B612FC6C816CEBFE07C69038F001FF4A6C13804A137F4AEB3FC091C7
121F4915E0160FA217F01607A8160FA217E07F161F6EEB3FC0A26EEB7F806E13FFDAF003
13009138FC0FFE91B55A5E495C6E13C0021F90C7FCEC03FC91C9FCAD383FFFF8487FB57E
A26C5B6C5B2C3C80A730>I<ED07F83A3FFF803FFF486DB51280B512C302CF14C06C13DF
6C9038FFFC3FD8001F13E09238801F809238000F004A90C7FC5C5C5CA25CA45CAF003FB5
12FC4880B7FCA26C5C6C5C2A287EA730>114 D<90381FFC1E48B5129F000714FF5A5A5A
387FF007EB800100FEC7FC4880A46C143E007F91C7FC13E06CB4FC6C13FC6CEBFF806C14
E0000114F86C6C7F01037F9038000FFF02001380007C147F00FEEC1FC0A2150F7EA27F15
1F6DEB3F806D137F9039FC03FF0090B6FC5D5D00FC14F0D8F83F13C026780FFEC7FC222A
79A830>I<EB0780497E131FA9003FB612E04815F0B7FCA36C15E026001FC0C7FCB216F8
ED01FCA5ECE003010FEB07F814F09138FC1FF06DB512E06D14C016806D14009038007FFC
EC1FF026337EB130>I<D83FFCEB3FFC486C497E00FF14FFA2007F147F003F143F000014
00B3A41501A2150315076D130F903A7FC07FFFF891B612FC6D15FE7F6D4913FC6D9038F8
7FF8010001C0C7FC2F2880A630>I<3B3FFFC07FFF80486DB512C0B515E0A26C16C06C49
6C13803B01F80003F000A26D130700005DA26D130F017E5CA2017F131F6D5CA2EC803F01
1F91C7FCA26E5A010F137EA2ECE0FE01075BA214F101035BA3903801FBF0A314FF6D5BA3
6E5A6E5A2B277EA630>I<3B3FFFC01FFFE0486D4813F0B515F8A26C16F06C496C13E0D8
07E0C7EA3F00A26D5C0003157EA56D14FE00015DEC0F80EC1FC0EC3FE0A33A00FC7FF1F8
A2147DA2ECFDF9017C5C14F8A3017E13FBA290393FF07FE0A3ECE03FA2011F5C90390F80
0F802D277FA630>I E /Fe 134[40 2[40 45 25 35 35 1[45 45
45 66 25 1[25 25 1[45 1[40 45 40 45 45 12[51 45 2[56
66 61 1[51 2[30 1[66 2[66 2[56 6[30 11[23 30 45[{
TeXBase1Encoding ReEncodeFont}32 91.249976 /Times-Italic
rf /Ff 1 16 df<EB0FFCEB3FFF90B512C0000314F04880488048804880A2481580A3B7
12C0AA6C1580A36C1500A26C5C6C5C6C5C6C5CC614C0013F90C7FCEB0FFC22227BA72D>
15 D E /Fg 1 14 df<ED0FFF92B512F0020314FC020F14FF91263FF80113C0913AFF80
001FF04948C7EA07F8D907F8EC01FED90FE0EC007FD91F80ED1F8049C96C7E017E707E49
707E4848707E4916004848177C0007187E49173E484883A248CBEA0F80A2003EF007C0A2
003C1803007C19E0A200781801A200F819F0A2481800A96C1801A2007819E0A2007C1803
A2003C19C0003E1807A26CF00F80A26C6CEF1F00A26C6C173E6D177E0003187C6C6C5F6D
16016C6C4C5A017E4C5A6D4C5A6D6C4B5AD90FE0037FC7FCD907F8EC01FED901FEEC07F8
6D6C6CEB1FF0913A3FF801FFC0020FB6C8FC020314FC020014F0030F90C9FC44477CB54D
>13 D E /Fh 134[37 2[37 1[21 29 25 1[37 37 37 1[21 2[21
37 37 1[33 1[33 37 14[42 3[54 11[50 9[37 2[37 4[37 2[19
46[{TeXBase1Encoding ReEncodeFont}22 75.000000 /Times-Roman
rf /Fi 104[91 45 1[40 40 24[40 45 45 66 45 45 25 35 30
45 45 45 45 71 25 45 25 25 45 45 30 40 45 40 45 40 3[30
1[30 2[66 86 66 66 56 51 61 1[51 1[66 81 56 1[35 30 66
1[51 56 66 61 61 66 1[40 3[25 25 45 45 45 45 45 45 45
45 45 45 25 23 30 23 2[30 30 30 35[51 51 2[{
TeXBase1Encoding ReEncodeFont}74 91.249976 /Times-Roman
rf /Fj 134[60 3[66 40 47 53 1[66 60 66 100 33 2[33 66
60 1[53 66 53 66 60 12[80 10[47 5[86 80 13[60 60 60 60
49[{TeXBase1Encoding ReEncodeFont}26 119.999948 /Times-Bold
rf /Fk 134[42 42 60 42 42 23 32 28 1[42 42 42 65 23 42
1[23 42 42 28 37 42 37 42 37 10[60 1[51 46 5[74 2[32
28 4[60 8[23 12[21 28 21 2[28 28 37[46 2[{TeXBase1Encoding ReEncodeFont}
37 83.333337 /Times-Roman rf /Fl 139[28 32 37 14[37 46
42 31[60 65[{TeXBase1Encoding ReEncodeFont}7 83.333337
/Times-Bold rf /Fm 13 119 df<121FEA3F80EA7FC0EAFFE0A5EA7FC0EA3F80EA1F00
0B0B6C8A33>46 D<EC07F8EC3FFF91B57E010314E0010F80498090383FFC0F90397FE003
FC9038FF80014890C77ED803FC147E49EB7E7F0007903801FFBFD9F00713FF4848481480
495A001F5B018013C3003FEB7F810100010013C002FE137F4849133FEA7E014A131FA212
FEEAFC034A130FA96E131FD8FE011580127EA26E133FD87F0015006C6D5B027F13FE0180
1381001F90383FC3FC01C013FF000F6D5B6D6C5B6C6C6C5BD9F80113800003D9007EC7FC
6D9038000F806CB4EC1FC06C6D133FD97FE013FF90263FFC0713806DB612006D5C010314
F801005C023F1380DA07FCC7FC2A3F7CBD33>64 D<EB1FFC90B57E000314E048804814FC
48809038F007FFEBE0016E7F153F6C48806C48131FC87F150FA5EC0FFF49B5FC131F137F
48B6FC0007140F4813C0381FFC00EA3FF0EA7FC05B48C7FC5AA56C141F7E6D137FD83FE0
497ED9F807EBFFF06CB712F87E6C14F36C14C1C69138003FF0D91FF090C7FC2D2E7BAC33
>97 D<ED7FF84B7E5CA280157F1501ABEB01FF010713C1011F13F1017F13F990B6FC5A48
13813907FE003FD80FF8131F49130F48481307491303123F491301127F90C7FCA25A5AA9
7E7E15037F123F6D1307A26C6C130F6D131F6C6C133F6C6C137F2603FF81B512F091B612
F8C602FD13FC6D13F96D01E113F8010F018013F0D901FEC8FC2E3E7DBC33>100
D<ECFF80010713F0011F13FC497F90B6FC48158048018013C03A07FE003FE001F8EB0FF0
48481307484814F8491303003F15FC491301127F90C7FC16FE15005A5AB7FCA516FC48C9
FC7E7EA36C7E167C6C6C14FE7F6C7E6D13016C6CEB03FC6CB4130F6C9038C03FF86C90B5
12F06D14E06D14C0010F1400010313FC9038007FE0272E7BAC33>I<EA3FFC487E12FFA2
127F123F1200AB4AB4FC020713C0021F13F0027F7F91B5FC90B67EED07FEECF801ECF000
4A7F4A7F5CA291C7FCA35BB3A43B3FFFF80FFFFC486D4813FEB56C4813FFA26C496C13FE
6C496C13FC303D7FBC33>104 D<14E0EB03F8A2497EA36D5AA2EB00E091C8FCAA383FFF
F8487FA47EEA0001B3AD007FB612C0B712E016F0A216E06C15C0243E78BD33>I<02FC13
7E3B7FC3FF01FF80D8FFEF01877F90B500CF7F15DF92B57E6C010F13872607FE07130301
FC01FE7F9039F803FC01A201F013F8A401E013F0B3A53C7FFE0FFF07FF80B548018F13C0
A46C486C01071380322C80AB33>109 D<ED03FE3B7FFF801FFF80B5D8C07F13E002C1B5
FC02C314F014C76C9038CFFE0F39001FDFF09139FFC007E092388003C092C8FC5C5C5CA2
5CA25CA35CB2007FB512FEB7FCA46C5C2C2C7DAB33>114 D<90381FFE0F90B5EA8F8000
0314FF120F5A5AEBF007387F800190C7FC00FE147F5A153FA37E007FEC1F0001C090C7FC
EA3FF8EBFFC06C13FF6C14E0000314F8C680011F13FF01001480020713C0EC007FED1FE0
007C140F00FEEC07F01503A27EA27F15076D14E06D130F6DEB3FC09038FE01FF90B61280
160000FD5C00FC14F8D8F83F13E0D8780790C7FC242E79AC33>I<EB03C0497E130FAA00
3FB612FC4881B7FCA36C5D26000FE0C8FCB3A3161FEE3F80A5167F6E140001075C6E5A91
38FE07FE6DB55A6D5C6D5C6E5B021F1380DA07FCC7FC29387EB633>I<D83FFCEB1FFE48
6C497E00FF5CA2007F80003F800000EC007FB3A75EA25DA26D5B90387F800FDAE03F13FC
6DB612FE17FF6D806D01FE13FE01039038F83FFC010001C0C7FC302C7FAA33>I<3B3FFF
C00FFFF0486D4813F8B56C4813FCA26C496C13F86C496C13F0D801F8C7EA7E006D14FE00
005DA26D1301017E5CA2017F13036D5CA2EC8007011F5CA2ECC00F010F5CA36D6C485AA3
ECF03F010391C7FCA26E5A0101137EA2ECFCFE01005BA214FF6E5AA36E5AA26E5A6E5A2E
2B7EAA33>I E /Fn 134[50 2[50 1[28 39 33 2[50 50 1[28
2[28 50 50 1[44 1[44 50 44 12[61 55 3[72 1[89 61 2[33
7[72 62[55 2[{TeXBase1Encoding ReEncodeFont}23 100.000003
/Times-Roman rf /Fo 134[72 2[72 72 40 56 48 1[72 72 72
112 40 2[40 72 72 1[64 72 64 1[64 13[80 8[56 74[{
TeXBase1Encoding ReEncodeFont}20 143.999997 /Times-Roman
rf end
%%EndProlog
%%BeginSetup
%%Feature: *Resolution 600dpi
TeXDict begin

%%EndSetup
%%Page: 1 1
1 0 bop 1054 937 a Fo(Supporting)34 b(dynamic)g(languages)1157
1120 y(on)h(the)h(Ja)m(v)l(a)f(virtual)f(machine)1694
1373 y Fn(Olin)24 b(Shi)n(v)o(ers)1178 1489 y(MIT)g(Arti\002cial)h
(Intelligence)f(Laboratory)1481 1605 y Fm(shivers@ai.mit.edu)1788
1941 y Fl(Abstract)800 2099 y Fk(In)31 b(this)i(note,)g(I)f(propose)e
(tw)o(o)i(e)o(xtensions)e(to)i(the)g(Ja)n(v)n(a)g(virtual)f(machine)f
(\(or)676 2199 y(VM\))c(to)g(allo)n(w)h(dynamic)d(languages)h(such)h
(as)h(Dylan,)h(Scheme)d(and)h(Smalltalk)g(to)676 2298
y(be)i(ef)n(\002ciently)g(implemented)f(on)i(the)g(VM.)g(These)f(e)o
(xtensions)g(do)h(not)f(af)n(fect)g(the)676 2398 y(performance)21
b(of)k(pure)e(Ja)n(v)n(a)i(programs)e(on)h(the)h(machine.)37
b(The)25 b(\002rst)g(e)o(xtension)e(al-)676 2498 y(lo)n(ws)h(for)g(ef)n
(\002cient)g(encoding)f(of)h(dynamic)f(data;)k(the)d(second)g(allo)n
(ws)h(for)f(ef)n(\002cient)676 2597 y(encoding)18 b(of)i
(language-speci\002c)d(computational)h(elements.)448
2890 y Fj(1)120 b(Intr)n(oduction)448 3097 y Fi(Ja)n(v)n(a)38
b(is)e(easily)i(the)f(highest-pro\002le)k(language)e(de)n(v)o(elopment)
g(ef)n(fort)e(going)h(today)-6 b(.)70 b(By)448 3210 y(riding)31
b(the)f(tidal)h(w)o(a)n(v)o(e)e(of)h(Internet)h(gro)n(wth,)h(Ja)n(v)n
(a)e(is)g(being)g(propagated)j(out)d(to)f(systems)448
3323 y(w)o(orld-wide.)40 b(This)27 b(presents)i(a)d(tempting)i
(opportunity)i(to)d(language)i(implementors:)38 b(if)27
b(a)448 3436 y(programming)i(language)g(can)d(be)h(compiled)h(for)e
(the)h(Ja)n(v)n(a)g(VM,)d(then)k(it)e(can)g(be)h(e)o(x)o(ecuted)448
3549 y(on)f(millions)g(of)f(computers.)36 b(A)24 b(port)h(to)g(the)h
(Ja)n(v)n(a)g(VM)e(is)h(a)f(port)i(to)f(practically)j(e)n(v)o(ery)e
(im-)448 3661 y(portant)f(hardw)o(are)g(platform)g(in)e(e)o(xistence.)
31 b(This)24 b(has,)f(for)h(e)o(xample,)g(dra)o(wn)f(the)h(attention)
448 3774 y(of)g(D)l(ARP)-8 b(A,)22 b(where)i(program)i(managers)f(ha)n
(v)o(e)g(e)o(xpressed)i(interest)f(in)e(ha)n(ving)i(the)f(results)448
3887 y(of)30 b(programming)i(language)h(research)f(tar)n(geted)g(to)e
(the)g(Ja)n(v)n(a)h(VM)d(as)i(a)g(means)g(of)g(doing)448
4000 y(instantaneous)e(technology)f(transfer)e(to)e(the)h(commercial)h
(sector)-5 b(.)589 4113 y(Ho)n(we)n(v)o(er)l(,)33 b(the)f(Ja)n(v)n(a)g
(VM)e(is)h(not)h(a)f(good)h(tar)n(get)h(machine)g(for)e(dynamic)i
(languages,)448 4226 y(for)24 b(reasons)i(in)l(v)n(olving)h(ef)n
(\002cient)e(representations)k(of)24 b(both)g(data)h(and)f(computation)
j(in)d(dy-)448 4339 y(namic)k(languages.)44 b(In)27 b(this)h(note,)h
(we')o(ll)f(consider)i(some)e(of)f(the)h(dif)n(\002culties)h(imposed)g
(by)448 4452 y(the)d(current)i(VM)c(speci\002cation,)29
b(and)d(e)o(xamine)h(tw)o(o)e(e)o(xtensions)k(to)d(alle)n(viate)h
(these)g(prob-)448 4565 y(lems.)p 448 4627 1196 4 v 448
4713 a Fh(Cop)o(yright)791 4711 y(c)769 4713 y Fg(\015)19
b Fh(1996)h(by)f(Olin)g(Shi)n(v)o(ers.)1920 5225 y Fi(1)p
eop
%%Page: 2 2
2 1 bop 448 573 a Fj(2)120 b(The)30 b(data)g(r)n(epr)n(esentation)g(pr)
n(oblem)448 780 y Fi(Dynamic)e(languages)i(typically)f(require)g
(special)g(representations)i(for)d(their)g(data)f(v)n(alues.)448
893 y(Consider)l(,)f(for)f(e)o(xample,)g(the)f(requirements)j(imposed)f
(by)e(Scheme')-5 b(s)25 b(polymorphism)i(and)448 1006
y(dynamic)36 b(type)f(system.)62 b(Scheme')-5 b(s)35
b(polymorphism)h(requires)h(a)d(\223uniform)h(representa-)448
1119 y(tion\224)f(of)e(data.)55 b(F)o(or)32 b(e)o(xample,)j(the)d(car)h
(and)g(cdr)f(slots)h(of)g(a)f(cons)h(cell)f(can)h(contain)h(an)o(y)448
1231 y(v)n(alue)i(of)e(an)o(y)g(type,)k(so)c(all)h(v)n(alues)g(of)g
(all)f(types)h(must)g(be)f(able)h(to)g(\002t)e(into)i(the)g(storage)448
1344 y(allocated)28 b(for)d(the)g(slots)h(of)f(the)h(cons)g(cell.)34
b(Similarly)-6 b(,)26 b(the)f(formal)h(parameter)g(of)f(a)g(proce-)448
1457 y(dure)31 b(can)f(be)g(bound)i(to)e(an)o(y)g(v)n(alue)g(of)g(an)o
(y)g(type.)49 b(This)30 b(means)g(that)h(subroutine)h(linkage)448
1570 y(con)l(v)o(entions)c(must)c(be)g(able)h(to)f(accept)i(an)o(y)e(v)
n(alue)h(in)f(the)h(e)o(xpected)h(place,)f(whether)g(it)f(is)g(a)448
1683 y(character)l(,)i(inte)o(ger)l(,)f(array)-6 b(,)24
b(or)g(other)g(v)n(alue.)589 1796 y(Scheme)c(implementations)j(solv)o
(e)e(the)f(one-size-\002ts-all)k(problem)d(by)f(representing)j(all)448
1909 y(v)n(alues)i(with)e(e)o(xactly)i(one)f(machine)h(w)o(ord:)585
2097 y Ff(\017)46 b Fi(If)26 b(the)g(v)n(alue)h(is)g(smaller)g(than)g
(a)f(single)h(w)o(ord)g(\()p Fe(e)o(.g)o(.)p Fi(,)f(a)g(character)i(or)
e(boolean\),)j(it)d(is)676 2209 y(padded)21 b(to)f(\002t)e(into)j(a)e
(single)i(w)o(ord.)28 b(Some)19 b(of)g(the)h(w)o(ord')-5
b(s)21 b(bits)f(are)g(used)g(to)g(represent)676 2322
y(the)j(type)i(of)e(the)h(v)n(alue.)29 b(Let)23 b(us)h(call)g(these)g
(v)n(alues)h(\223immediate)g(descriptors.)-6 b(\224)585
2510 y Ff(\017)46 b Fi(If)23 b(the)h(v)n(alue)g(is)f(lar)n(ger)i(than)g
(a)e(single)h(w)o(ord)g(\()p Fe(e)o(.g)o(.)p Fi(,)e(a)h(cons)i(cell)f
(or)f(double-precision)676 2623 y(\003oating-point)i(number\),)f(it)e
(is)g(\223box)o(ed\224\227that)k(is,)c(the)h(actual)h(data)f(for)f(the)
h(v)n(alue)g(is)676 2736 y(stored)j(in)f(memory)-6 b(,)25
b(and)h(the)f(v)n(alue)h(is)e(represented)29 b(by)c(the)g(address)i(of)
e(that)g(re)o(gion)676 2849 y(of)19 b(memory)-6 b(.)28
b(The)19 b(bit-encoding)k(of)d(the)g(address)h(needs)g(to)e(be)h
(distinguishable)k(from)676 2962 y(bit-encoding)36 b(of)d(immediate)h
(descriptors;)41 b(be)o(yond)35 b(this)e(simple)h(discrimination,)676
3075 y(more)22 b(comple)o(x)h(type)g(information)i(can)e(be)f(stored)i
(in)e(the)h(header)h(of)e(the)g(associated)676 3187 y(block)i(of)g
(memory)-6 b(.)589 3375 y(Unfortunately)g(,)42 b(the)36
b(Ja)n(v)n(a)h(virtual)g(machine)g(has)f(been)h(designed)h(as)e(a)f
(tar)n(get)j(for)e(a)448 3488 y(monomorphic,)30 b(statically-typed)h
(object-oriented)h(language.)40 b(T)-7 b(o)26 b(the)h(de)o(gree)h(that)
f(poly-)448 3601 y(morphism)37 b(is)e(supported)k(by)d(the)g(virtual)h
(machine,)i(it)d(must)f(be)h(realised)i(by)d(the)h(class)448
3714 y(hierarchy)-6 b(,)26 b(which)e(allo)n(ws)f(us)h(to)f(b)n(uild)i
(objects)g(of)f(dif)n(ferent)h(run-time)g(\223types.)-6
b(\224)589 3827 y(F)o(or)32 b(e)o(xample,)k(suppose)f(we)d(wish)h(to)g
(compile)h(Scheme)f(code)h(for)f(the)g(Ja)n(v)n(a)h(virtual)448
3940 y(machine.)42 b(The)27 b(dif)n(ferent)i(types)f(of)f(Scheme)h(v)n
(alues)g(can)g(be)f(represented)k(as)c(sub-classes)448
4053 y(of)34 b(the)h(Ja)n(v)n(a)f Fd(Object)e Fi(class:)51
b(we)33 b(can)i(represent)h(small)e(inte)o(gers)i(as)e(Ja)n(v)n(a)h
Fd(Int)d Fi(objects;)448 4165 y(de\002ne)23 b(a)e Fd(Procedure)e
Fi(class)k(for)g(Scheme)f(procedures,)j(with)d Fd(Closure)d
Fi(and)k Fd(Primop)d Fi(sub-)448 4278 y(classes;)39 b(and)34
b(so)e(forth.)57 b(The)32 b(VM)g(allo)n(ws)g(one)i(to)e(perform)i
(run-time)g(tests)f(to)g(query)h(if)448 4391 y(an)e(object)h(is)f(of)f
(a)g(gi)n(v)o(en)i(sub-class,)j(so)31 b(we)g(can)h(perform)h(the)f
(run-time)h(type)f(tests)h(that)448 4504 y(Scheme)24
b(needs)h(as)e(desired.)589 4617 y(The)h(dif)n(\002culty)i(with)e(this)
h(representation)k(is)24 b(that)h(small)f(objects,)i(such)g(as)e
(characters,)448 4730 y(small)35 b(inte)o(gers,)j(and)d(booleans,)k
(must)c(be)f(represented)k(as)c(general)i(Ja)n(v)n(a)f(objects.)63
b(The)448 4843 y(Ja)n(v)n(a)27 b(virtual)h(machine)g(uses)f(a)f(box)o
(ed)i(representation)j(to)26 b(be)g(able)i(to)e(uniformly)i(describe)
448 4956 y(objects)36 b(of)e(dif)n(ferent)i(classes:)52
b(an)34 b(object)i(is)d(represented)38 b(by)c(a)g(pointer)h(to)f(a)g
(chunk)h(of)1920 5225 y(2)p eop
%%Page: 3 3
3 2 bop 448 573 a Fi(memory)19 b(containing)i(a)d(description)j(of)e
(its)f(class)h(and)g(its)f(state)i(v)n(ariables.)29 b(As)17
b(with)h(Scheme)448 686 y(data,)k(boxing)h(Ja)n(v)n(a)f(object)g(data)f
(allo)n(ws)h(us)f(to)g(represent)i(all)e(Ja)n(v)n(a)h(objects)g
(uniformly)-6 b(,)23 b(with)448 799 y(e)o(xactly)i(one)f(machine)h(w)o
(ord.)589 912 y(The)k(o)o(v)o(erhead)h(of)f(boxing)i(is)d(acceptable)k
(for)d(multi-w)o(ord)h(objects,)i(b)n(ut)d(is)g(quite)g(e)o(x-)448
1024 y(pensi)n(v)o(e)39 b(for)f(objects)i(that)e(\002t)f(within)h(a)g
(single)h(w)o(ord.)71 b(Implementations)41 b(of)d(dynamic)448
1137 y(languages)e(typically)f(use)e(cle)n(v)o(er)g(encodings)j(to)c
(represent)j(these)f(v)n(alues)g(as)e(immediate)448 1250
y(descriptors\227allo)n(wing)27 b(them)22 b(to)f(e)o(xpress)j(the)e(v)n
(alue)g(in)g(a)f(single)i(machine)g(w)o(ord,)f(without)448
1363 y(requiring)k(an)o(y)e(e)o(xtra)g(information)i(to)d(be)h(stored)h
(in)e(memory)-6 b(.)589 1476 y(Immediate)36 b(descriptors)h(and)e
(pointers)h(to)e(box)o(ed)i(v)n(alues)f(are)g(frequently)i(discrimi-)
448 1589 y(nated)e(by)f(using)h(a)e(single)i(lo)n(w-order)g(bit)f(of)g
(the)g(descriptor)-5 b(.)62 b(Since)34 b(backing)h(store)g(for)448
1702 y(box)o(ed)21 b(objects)h(is)d(typically)k(allocated)f(on)e(w)o
(ord-size)h(boundaries,)j(on)c(a)f(byte-addressable)448
1815 y(machine)29 b(the)f(lo)n(w-order)g(bit)g(is)f(unused)j(by)d
(pointers,)j(and)e(so)g(can)f(be)h(used)g(for)g(this)g(lo)n(w-)448
1928 y(le)n(v)o(el)c(discrimination.)589 2041 y(F)o(or)19
b(e)o(xample,)h(some)g(Scheme)f(implementations)j(represent)g
(immediate)e(data)g(\(such)g(as)448 2154 y(characters,)32
b(30-bit)d(inte)o(gers,)h(the)e(empty)h(list,)g(and)f(booleans\))j(as)d
(32-bit)h(patterns)h(whose)448 2267 y(least-signi\002cant)39
b(bit)c(is)f(zero.)63 b(The)34 b(ne)o(xt)h(bit)g(is)f(used)i(to)e
(discriminate)k(30-bit)e(inte)o(gers)448 2379 y(from)28
b(other)h(immediate)f(descriptors:)41 b(if)28 b(it)f(is)h(zero,)h(the)f
(32-bit)h(pattern)g(represents)i(a)c(30-)448 2492 y(bit)c(inte)o(ger;)h
(if)e(it)g(is)g(one,)g(the)h(ne)o(xt)g(six)f(bits)h(are)f(used)h(to)f
(pro)o(vide)i(the)f(type)f(information)j(for)448 2605
y(the)f(descriptor)l(,)i(lea)n(ving)g(three)e(bytes)h(from)f(the)f
(descriptor)k(for)c(the)h(actual)h(data.)589 2718 y(Note)34
b(that)h(making)g(the)f(small-inte)o(ger)i(type)f(tag)f(be)g(the)g
(bits)h(\22300\224)f(means)h(that)f(we)448 2831 y(can)f(add)g(and)f
(subtract)j(these)e(v)n(alues)g(without)h(ha)n(ving)g(to)e(con)l(v)o
(ert)i(to)e(the)h(ra)o(w)e(machine)448 2944 y(representation)k(and)c
(back;)36 b(multiplication)e(requires)e(one)f(normalising)j(shift)d
(before)h(the)448 3057 y(multiply;)25 b(di)n(vision)h(requires)f(a)f
(shift)g(after)g(the)g(di)n(vide.)589 3170 y(Scheme,)31
b(Lisp,)g(Dylan,)g(and)f(Smalltalk)h(implementors)h(ha)n(v)o(e)e(e)o
(xploited)i(these)e(sorts)448 3283 y(of)35 b(representational)k(de)n
(vices)e(for)e(decades)h(to)f(achie)n(v)o(e)h(good)g(performance)h
(from)d(their)448 3396 y(systems.)589 3509 y(W)l(ithout)c
(immediate-descriptor)i(representations,)h(the)28 b(boxing/unboxing)33
b(costs)c(can)448 3621 y(sw)o(amp)f(the)h(actual)g(cost)g(of)f
(computing)i(with)e(small)h(v)n(alues.)44 b(F)o(or)27
b(e)o(xample,)j(adding)g(tw)o(o)448 3734 y(small)i(inte)o(gers)h(w)o
(ould)f(in)l(v)n(olv)o(e)i(tw)o(o)d(memory)h(fetches)h(to)e(unbox)i
(the)f(addends,)j(an)d(add)448 3847 y(instruction,)c(and)e(then)f(an)g
(allocation)j(to)d(box)g(the)h(ne)n(w)e(v)n(alue.)34
b(String)25 b(and)g(character)j(pro-)448 3960 y(cessing)21
b(will)e(ha)n(v)o(e)h(similar)g(o)o(v)o(erheads.)30 b(In)19
b(short,)i(while)e(our)h(lar)n(ge,)h(composite)g(data)f(struc-)448
4073 y(tures)25 b(remain)f(f)o(airly)h(ef)n(\002cient,)f(it)f(becomes)i
(much)f(more)f(e)o(xpensi)n(v)o(e)i(to)f(compute)h(with)e(the)448
4186 y(primiti)n(v)o(e)i(scalar)f(data)h(v)n(alues.)448
4435 y Fc(2.1)99 b(Adding)26 b(immediate)f(descriptors)h(to)f(the)h(J)o
(a)n(v)o(a)d(VM)448 4609 y Fi(A)g(simple)h(e)o(xtension)j(to)c(the)h
(Ja)n(v)n(a)h(VM)d(will)i(allo)n(w)g(us)f(to)h(reap)h(the)f(bene\002ts)
h(of)e(immediate)448 4722 y(descriptors.)31 b(W)-7 b(e)19
b(can)h(do)f(this)i(by)e(making)i(tw)o(o,)f(simple,)g(backw)o
(ards-compatible)25 b(changes)448 4835 y(to)f(the)g(VM:)1920
5225 y(3)p eop
%%Page: 4 4
4 3 bop 585 573 a Ff(\017)46 b Fi(All)29 b(pointers)k(to)d(box)o(ed)h
(Ja)n(v)n(a)g(objects)h(must)f(ha)n(v)o(e)g(a)f(lo)n(w)f(bit)i(of)f
(one.)50 b(This)30 b(is)g(not)676 686 y(an)35 b(onerous)i(restriction:)
56 b(if)35 b(box)o(ed)h(objects)h(are)e(allocated)j(in)d(w)o(ord)g
(units,)k(on)d(a)676 799 y(byte-addressable)28 b(machine)d(the)f(lo)n
(w)f(tw)o(o)g(bits)h(of)f(the)h(pointer)h(are)f(unused.)585
986 y Ff(\017)46 b Fi(A)20 b(ne)n(w)i(class,)h Fd(ImmediateDescriptor)p
Fi(,)16 b(is)22 b(introduced.)31 b Fd(ImmediateDescrip-)676
1099 y(tor)21 b Fi(is)h(a)g(direct)i(sub-class)h(of)d(the)h
Fd(Object)d Fi(class,)j(and)g(has)g(e)o(xactly)h(31)f(bits)g(of)f
(state)676 1212 y(\(we)h(might)i(also)g(wish)f(to)g(de\002ne)h(a)f
Fd(LongImmediateDescriptor)17 b Fi(class)25 b(with)f(63)676
1325 y(bits)32 b(of)f(state\).)53 b(The)31 b Fd(ImmediateDescriptor)26
b Fi(class)32 b(is)f(a)g(\002nal)g(class)i(\(meaning)676
1438 y(that)h(it)g(cannot)i(be)e(sub-classed\),)40 b(so)34
b(if)g(a)g(Ja)n(v)n(a)h(object)g(is)f(kno)n(wn)h(to)f(be)g(of)g(class)
676 1551 y Fd(ImmediateDescriptor)p Fi(,)d(it)j(requires)j(no)e(more)g
(than)g(31)g(bits)g(to)g(represent)i(its)676 1664 y(v)n(alue.)676
1814 y(An)30 b Fd(ImmediateDescriptor)25 b Fi(object)32
b(is)e(represented)k(as)d(a)g(machine)h(w)o(ord)e(with)676
1927 y(lo)n(w)d(bit)i(0.)42 b(It)28 b(requires)i(no)e(backing)j
(storage,)g(and)d(can)h(reliably)h(be)e(distinguished)676
2040 y(from)23 b(box)o(ed)i(objects)g(by)e(its)h(lo)n(w)f(bit.)676
2190 y(An)32 b Fd(ImmediateDescriptor)c Fi(can)34 b(be)f(cast)i(to)e
(an)h(e)n(v)o(en)f(32-bit)i(inte)o(ger;)40 b(such)35
b(a)676 2303 y(cast)e(is)h(merely)g(a)e(compile-time)k(change)f(of)e
(vie)n(wpoint,)k(requiring)f(no)d(run-time)676 2416 y(computation.)47
b(Similarly)-6 b(,)31 b(an)e(inte)o(ger)h(can)f(be)g(cast)h(to)f(an)g
Fd(ImmediateDescrip-)676 2529 y(tor)p Fi(;)22 b(the)i(Ja)n(v)n(a)g(VM)e
(implements)j(this)f(cast)g(by)g(shifting)h(the)f(inte)o(ger)h(left)f
(one)g(bit.)589 2716 y(Implementations)30 b(of)c(dynamic)i(languages)h
(can)d(no)n(w)g(use)h(immediate)g(descriptors)i(to)448
2829 y(ef)n(\002ciently)g(represent)h(small)e(data)g(v)n(alues)h
(without)f(requiring)i(the)e(allocation)i(of)d(backing)448
2942 y(store.)589 3055 y(Introducing)j(immediate)c(descriptors)j(into)e
(the)f(VM)e(should)k(ha)n(v)o(e)e(almost)h(no)f(impact)448
3168 y(on)34 b(programs)i(that)e(do)g(not)g(use)g(them.)60
b(It)33 b(is)h(w)o(orth)g(e)o(xamining,)k(ho)n(we)n(v)o(er)l(,)f(the)d
(task)g(of)448 3281 y(method)d(lookup)g(on)f(Ja)n(v)n(a)g(objects)h
(for)f(performance)i(impact.)48 b(Method)31 b(lookup)g(of)e(stan-)448
3394 y(dard)23 b(Ja)n(v)n(a)f(objects)h(in)l(v)n(olv)o(es)h
(indirecting)h(through)f(the)e(pointer)h(that)f(represents)i(the)e(box)
o(ed)448 3507 y(object.)71 b(Such)37 b(an)g(indirection)j(is)d(not)g
(well-de\002ned)i(for)e(descriptors)j(that)d(are)h(not)f(ad-)448
3620 y(dresses,)24 b(such)f(as)f(immediate)h(descriptors.)32
b(So)21 b(the)h(Ja)n(v)n(a)h(machine)g(must)f(perform)h(method)448
3733 y(lookup)31 b(on)f(objects)h(of)e(class)h Fd(ImmediateDescriptor)
24 b Fi(using)30 b(an)f(alternate)j(technique,)448 3846
y(for)24 b(e)o(xample,)g(by)g(checking)i(in)d(a)g(special)i(method)g
(table)f(kno)n(wn)g(to)g(the)f(VM.)589 3958 y(If)34 b(an)g(object)h(is)
f(kno)n(wn)g(to)g(be)g(an)o(y)g(sub-class)i(of)e(the)g
Fd(Object)e Fi(class)i(that)h(isn')n(t)g(the)448 4071
y Fd(ImmediateDescriptor)19 b Fi(class,)26 b(then)g(it)e(is)h
(guaranteed)j(to)d(be)g(box)o(ed,)h(and)f(the)g(standard)448
4184 y(method)30 b(lookup)h(can)e(be)g(emplo)o(yed.)47
b(If)28 b(an)h(object)i(is)d(kno)n(wn)i(to)f(be)f(an)h
Fd(ImmediateDe-)448 4297 y(scriptor)p Fi(,)e(then)i(the)f(special)i
(method-lookup)i(technique)f(can)e(be)f(used)i(instead.)44
b(Ho)n(w-)448 4410 y(e)n(v)o(er)l(,)29 b(if)e(the)h(object)g(is)g(of)f
(class)h Fd(Object)o Fi(,)f(then)h(it)f(could)i(be)e(either)i(box)o(ed)
f(or)g(immediate,)448 4523 y(and)20 b(the)f(VM)e(must)i(perform)h(a)e
(run-time)j(test)e(on)g(the)g(lo)n(w)f(bit)h(to)g(determine)h(ho)n(w)f
(to)g(look)g(up)448 4636 y(its)24 b(method.)29 b(F)o(ortunately)-6
b(,)25 b(we)e(can)g(use)h(a)e(classic)j(Lisp)e(trick)h(to)f(optimise)i
(this)f(case:)29 b(since)448 4749 y(the)f(tw)o(o)e(kinds)j(of)e
(descriptor)i(are)f(distinguished)j(by)c(their)h(lo)n(w)e(bit,)i(the)f
(VM)f(can)i(simply)448 4862 y(assume)j(the)g(descriptor)i(is)d(a)g(box)
o(ed)i(object)f(and)g(perform)h(the)e(necessary)j(memory)e(load)448
4975 y(to)f(start)h(the)f(method)h(lookup.)49 b(If)30
b(the)g(descriptor)i(is)e(actually)i(an)e(immediate)g(descriptor)l(,)
1920 5225 y(4)p eop
%%Page: 5 5
5 4 bop 448 573 a Fi(this)23 b(will)f(generate)j(a)c(memory-alignment)
26 b(e)o(xception)f(on)d(the)h(underlying)i(hardw)o(are.)30
b(The)448 686 y(VM)d(can)h(catch)h(this)f(e)o(xception)i(and)f(v)o
(ector)f(of)n(f)g(to)g(the)g(custom)h(code)f(for)g(doing)h(method)448
799 y(lookups)g(on)d(immediate)h(descriptors.)40 b(W)l(ith)27
b(this)f(trick,)i(supporting)h(immediate)e(descrip-)448
912 y(tors)g(in)g(the)f(VM)f(imposes)j(zero)f(cost)g(on)g(operations)i
(that)e(are)f(performed)j(on)d(box)o(ed)i(Ja)n(v)n(a)448
1024 y(objects.)448 1317 y Fj(3)120 b(The)30 b(computational)g(r)n(epr)
n(esentation)g(pr)n(oblem)448 1524 y Fi(No)n(w)21 b(let)h(us)g(turn)h
(to)f(the)g(problem)i(of)d(using)j(the)e(Ja)n(v)n(a)h(VM)d(to)i
(represent)j(the)d(computations)448 1637 y(to)28 b(be)g(performed)i
(upon)g(our)e(data.)43 b(The)28 b(problem)h(here)g(is)f(to)g(be)g
(found)h(in)f(the)h(design)g(of)448 1750 y(the)24 b(instruction)j(set.)
448 1999 y Fc(3.1)99 b(Encoding)27 b(tension:)k(trust)26
b Fb(vs.)k Fc(ef\002ciency)448 2173 y Fi(The)j(basic)h(issue)g
(addressed)i(by)d(the)h(design)h(of)e(the)g(Ja)n(v)n(a)h(VM)e(is)h(the)
g(tension)i(between)448 2286 y(trust)27 b(and)f(ef)n(\002cienc)o(y)-6
b(.)37 b(W)-7 b(e)24 b(wish)i(to)g(describe)i(our)e(computation)i(with)
e(a)f(notation)j(\(that)f(is,)448 2399 y(a)c(language\))k(that)585
2587 y Ff(\017)46 b Fi(can)23 b(be)h(v)o(eri\002ed)g(locally)-6
b(,)25 b(and)585 2774 y Ff(\017)46 b Fi(is)23 b(ef)n(\002ciently)i(e)o
(x)o(ecutable.)589 2962 y(The)g(Ja)n(v)n(a)g(VM')-5 b(s)24
b(instruction)k(set)d(\002ts)f(these)i(criteria.)34 b(It)24
b(\002ts)h(the)g(second)h(criterion)h(be-)448 3075 y(cause)j(it)e(w)o
(as)g(carefully)j(designed)g(to)d(ef)n(\002ciently)i(encode)g(programs)
g(e)o(xpressed)h(in)d(Ja)n(v)n(a.)448 3188 y(No)n(w)i(that)h(we)e(are)i
(trying)h(to)e(e)o(xtend)i(the)f(co)o(v)o(erage)h(to)f(other)g
(programming)i(languages,)448 3301 y(we)22 b(are)h(ha)n(ving)i(trouble)
f(meeting)g(the)f(ef)n(\002cienc)o(y)h(criterion\227the)i(Ja)n(v)n(a)e
(VM)d(does)j(not)f(ef)n(\002-)448 3414 y(ciently)i(e)o(xpress)f(Scheme)
f(or)g(Dylan)g(programs.)31 b(What)23 b(to)f(do?)30 b(If)22
b(we)h(changed)i(the)e(VM)e(to)448 3527 y(be)28 b(a)e(generic)j(RISC)d
(instruction)k(set,)f(we')-5 b(d)27 b(get)h(our)f(ef)n(\002cienc)o(y)i
(back,)g(b)n(ut)e(we')-5 b(d)28 b(lose)g(the)448 3640
y(safety)g(criterion.)40 b(Ho)n(w)26 b(do)g(you)i(trust)f(a)f(program)i
(e)o(xpressed)h(in)e(assembler?)40 b(That)27 b(is)f(the)448
3752 y(tension.)589 3865 y(The)d(essence)j(of)d(the)h(problem)g(with)g
(the)f(Ja)n(v)n(a)i(VM)d(as)h(a)g(general-purpose)28
b(instruction)448 3978 y(set)c(is)f(that)h(it)f(is)g(a)g(CISC:)f(a)h
(high-le)n(v)o(el,)i(highly)g(encoded)h(instruction)g(set)e(that)g(is)f
(carefully)448 4091 y(tuned)31 b(to)f(the)g(demands)i(of)d(the)i(Ja)n
(v)n(a)f(language.)50 b(The)30 b(indi)n(vidual)i(b)n(uilding)h
(blocks\227the)448 4204 y(instructions\227for)25 b(e)o(xpressing)d(a)e
(computation)i(are)e(comple)o(x,)i(high-le)n(v)o(el,)g(safe)f(units.)28
b(F)o(or)448 4317 y(e)o(xample,)c(the)g(Ja)n(v)n(a)g(VM)f
(\223hard-wires\224)j(method)e(lookup)h(into)g(a)e(single)i
(instruction.)589 4430 y(The)31 b(problem)h(with)f(CISC)e(instruction)
34 b(sets)e(is)e(that)i(the)o(y)f(are)g(brittle)i(encodings.)54
b(If)448 4543 y(a)30 b(computation)j(\002ts)d(the)h(instruction)i(set)e
(e)o(xactly)-6 b(,)33 b(things)f(are)e(good:)44 b(it)30
b(can)h(be)f(encoded)448 4656 y(compactly)-6 b(,)28 b(and)d(e)o(x)o
(ecuted)i(ef)n(\002ciently)-6 b(.)36 b(But)25 b(if)g(a)f(computation)k
(is)e(just)f(slightly)j(dif)n(ferent,)448 4769 y(there)22
b(is)f(no)g(simple,)h(ef)n(\002cient)f(encoding.)31 b(F)o(or)20
b(e)o(xample,)i(if)e(our)h(object-oriented)26 b(language)448
4882 y(does)35 b(method)g(lookup)g(just)g(a)e(little)i(bit)f(dif)n
(ferently)j(from)c(the)i(Ja)n(v)n(a)f(semantics)i(that)e(are)1920
5225 y(5)p eop
%%Page: 6 6
6 5 bop 448 573 a Fi(implemented)31 b(by)d(the)h(VM')-5
b(s)28 b(instruction)k(set,)d(we)f(can')n(t)i(use)f(the)g(VM')-5
b(s)28 b(class)h(system)g(or)448 686 y(the)24 b(VM')-5
b(s)23 b(method-lookup)k(instruction.)589 799 y(This)i(is)g(not)g(the)g
(f)o(ault)h(of)f(the)g(Ja)n(v)n(a)h(VM.)d(It)h(w)o(as)h(tuned)h(for)f
(implementing)i(Ja)n(v)n(a)f(and)448 912 y(cle)n(v)o(erly)f(e)o
(xploits)g(this)f(constraint)i(to)d(achie)n(v)o(e)h(dense,)h(ef)n
(\002cient)g(encodings)h(of)d(programs)448 1024 y(written)c(in)g(Ja)n
(v)n(a.)29 b(The)21 b(problem)j(is)e(that)h(no)n(w)f(the)g(VM)f(is)h
(being)i(used)f(for)f(ne)n(w)g(purposes\227)448 1137
y(as)i(the)g(tar)n(get)h(of)e(dif)n(ferent)j(languages.)589
1250 y(This)35 b(limitation)i(of)d(CISC)f(instruction)38
b(sets)d(has)g(al)o(w)o(ays)h(been)f(at)g(the)g(heart)g(of)g(the)448
1363 y(RISC)19 b(philosophy:)31 b(encoding)23 b(programs)f(at)f(a)f(lo)
n(wer)n(-le)n(v)o(el)i(means)f(there)h(is)e(more)h(room)f(to)448
1476 y(maneuv)o(er)j(when)e(the)g(compiler)i(is)e(mapping)h(high-le)n
(v)o(el)i(programs)f(do)n(wn)e(to)g(the)g(machine)448
1589 y(in)j(w)o(ays)g(that)h(ef)n(\002ciently)g(utilise)h(the)e
(machine')-5 b(s)26 b(resources.)33 b(The)23 b(lesson)j(here)e(is)g
(that)h(this)448 1702 y(holds)i(as)f(much)g(for)g(the)g(Ja)n(v)n(a)h
(VM)d(in)i(the)g(nineties)i(as)d(it)h(did)g(for)g(the)g(V)-12
b(AX)24 b(11/780)j(in)f(the)448 1815 y(eighties.)448
2064 y Fc(3.2)99 b(Writeable)25 b(contr)n(ol)h(stor)n(e)f(and)h(trust)f
(boundaries)448 2238 y Fi(F)o(ahlman)e(has)f(made)h(an)f(interesting)k
(proposal)e([F)o(ahlman96)r(])e(to)g(help)i(\223open)f(up\224)g(the)g
(Ja)n(v)n(a)448 2351 y(VM')-5 b(s)29 b(instruction)j(set)d(in)g(order)h
(to)f(address)i(this)f(problem.)47 b(The)28 b(idea)i(is)f(to)g(allo)n
(w)g(some)448 2464 y(of)f(the)h(opcode)h(space)f(in)f(the)h(VM')-5
b(s)27 b(instruction)k(set)e(to)f(be)g(implemented)i(by)e(C)f(routines)
448 2577 y(that)i(are)g(dynamically)i(link)o(ed)e(into)g(the)g(VM.)e
(The)g(implementors)k(for)d(a)g(gi)n(v)o(en)h(language)448
2690 y(could)38 b(therefore)i(design)e(and)f(use)h(the)f(e)o(xtra)g
(handful)i(of)e(instructions)j(that)e(ef)n(\002ciently)448
2803 y(e)o(xpress)27 b(computations)h(written)e(in)f(their)h(language.)
36 b(This)25 b(is)g(essentially)j(the)d(VM)f(analog)448
2916 y(of)g(writeable)h(control)g(store\227e)o(xtensible)j(microcode.)
589 3029 y(What)21 b(we)e(are)i(doing)g(here)g(is)f(playing)i(with)f
(the)f(trust)h(boundaries)i(to)e(impro)o(v)o(e)f(the)h(ef)n(\002-)448
3142 y(cienc)o(y)j(of)f(the)g(whole)g(system.)29 b(The)23
b(microcode)i(e)o(xtension)g(allo)n(ws)e(us)g(to)f(de\002ne)i(ne)n(w)e
(safe)448 3255 y(b)n(uilding)33 b(blocks)g(using)e(a)g(dangerous)i
(implementation)h(substrate.)52 b(Ho)n(we)n(v)o(er)l(,)32
b(allo)n(wing)448 3367 y(for)22 b(\223microcode\224)i(written)e(in)f(C)
f(and)i(deli)n(v)o(ered)h(as)f(ra)o(w)e(machine)j(code)f(to)f(be)h
(dynamically)448 3480 y(loaded)j(into)f(the)f(VM)f(requires)j(us)f(to)f
(decide)h(why)f(we)f(are)i(going)g(to)f(trust)h(the)g(microcode,)448
3593 y(and)g(ho)n(w)f(we)g(are)h(going)h(to)e(v)o(erify)h(programs)i
(that)e(use)g(these)g(instructions.)589 3706 y(This)59
b(technique)j(e)o(xploits)f(the)e(f)o(act)h(that)f(there)h(aren')n(t)h
(v)o(ery)e(man)o(y)g(language)448 3819 y(implementations\227there)43
b(are)38 b(man)o(y)g(more)g(programs)h(than)f(there)h(are)f(languages.)
74 b(A)448 3932 y(handful)29 b(of)e(microcode)i(libraries)f(w)o(ould)g
(need)f(to)g(be)g(de)n(v)o(eloped)i(by)e(the)g(language)i(com-)448
4045 y(munity)-6 b(.)32 b(Perhaps)25 b(we)f(w)o(ould)h(end)f(up)h(with)
f(one)g(from)h(Harlequin)h(for)e(doing)i(Dylan)e(\(with)448
4158 y(Dylan-style)h(method)e(lookup)g(in)f(an)g(instruction\),)k(one)c
(from)g(He)n(wlett-P)o(ackard)i(for)e(doing)448 4271
y(Scheme)32 b(\(with)f(closures,)k(tail-recursion,)i(and)32
b(tagged)h(arithmetic\),)i(and)d(so)g(forth.)53 b(The)448
4384 y(Dylan)26 b(implementors)h(at)e(CMU)e(might)j(either)g
(collaborate)i(with)d(the)g(Harlequin)i(team)e(on)448
4497 y(a)i(common)g(instruction-set)k(e)o(xtension,)e(or)e
(independently)k(de)n(v)o(elop)d(one)f(tuned)h(for)e(their)448
4609 y(compiler)36 b(technology)-6 b(.)64 b(The)33 b(source)j(code)f
(for)f(these)h(fe)n(w)f(microcode)i(libraries)g(w)o(ould)448
4722 y(be)29 b(submitted)h(to)f(a)f(Ja)n(v)n(a)h(consortium,)j(who)d(w)
o(ould)g(check)h(them)e(and)h(publish)i(digitally-)448
4835 y(signed)f(copies)g(on)f(the)g(netw)o(ork.)45 b(When)28
b(an)h(application)j(is)c(loaded)i(by)f(the)g(Ja)n(v)n(a)g(VM,)e(if)448
4948 y(the)k(VM)e(doesn')n(t)k(ha)n(v)o(e)e(the)g(necessary)i
(microcode)f(loaded,)i(it)c(fetches)i(it)e(from)g(a)g(serv)o(er)1920
5225 y(6)p eop
%%Page: 7 7
7 6 bop 448 573 a Fi(and)31 b(v)o(eri\002es)f(the)h(consortium')-5
b(s)33 b(digital)e(signature.)51 b(If)30 b(the)g(application)j(is)d
(implemented)448 686 y(using)j(some)f(e)o(xperimental)i(system)f(which)
f(hasn')n(t)h(yet)f(recei)n(v)o(ed)h(the)f(consortium')-5
b(s)35 b(im-)448 799 y(primatur)l(,)e(the)d(user)h(w)o(ould)f(ha)n(v)o
(e)g(the)g(option)i(of)d(loading)j(in)e(the)g(microcode)i(from)d(other)
448 912 y(routes\227perhaps)k(he)28 b(got)h(a)f(\003opp)o(y)h(disk)g
(from)f(CMU)f(with)h(their)i(Dylan)e(release)i(that)f(he)448
1024 y(trusts.)589 1137 y(T)-7 b(o)29 b(repeat,)j(notice)e(that)g(the)g
(issue)h(is:)40 b(why)29 b(should)i(I)e(trust)h(your)g(microcode,)j
(which)448 1250 y(comes)d(written)g(in)g(some)f(dangerous,)34
b(un)l(v)o(eri\002able)e(language,)h(such)d(as)g(a)f(SP)-8
b(ARC)26 b(a.out)448 1363 y(\002le)31 b(or)f(a)h(chunk)h(of)f(C)f
(code?)52 b(The)30 b(e)o(xample)i(answers)g(I)e(ha)n(v)o(e)i(been)f(gi)
n(ving)i(rely)e(on)g(the)448 1476 y(f)o(act)c(that)f(the)h(scale)f(of)g
(the)h(problem)g(is)f(v)o(ery)g(containable,)j(since)e(it)f(per)g
(language)j(imple-)448 1589 y(mentation,)i(not)d(per)g(program.)44
b(If)27 b(the)h(user)h(will)f(deal)g(with)g(the)g(mechanics)i(of)e
(authoris-)448 1702 y(ing)k(his)g(computer)h(to)f(trust)g(He)n(wlett-P)
o(ackard')-5 b(s)34 b(Scheme)e(microcode,)j(he)d(can)g(no)n(w)f(run)448
1815 y(an)o(y)j(Scheme)g(application)j(in)d(the)g(w)o(orld)g(that)g(w)o
(as)f(produced)k(with)c(He)n(wlett-P)o(ackard')-5 b(s)448
1928 y(Scheme-to-Ja)n(v)n(a-VM)26 b(compiler)-5 b(.)589
2041 y(This)27 b(little)g(e)o(xtra)g(de)o(gree)g(of)f(freedom)i(means)e
(that)h(language)i(implementors)f(such)f(as)448 2154
y(a)33 b(Dylan)g(de)n(v)o(elopment)i(team)d(could)i(design)g(those)g
(fe)n(w)e(e)o(xtra)h(instructions)j(that)e(w)o(ould)448
2267 y(mak)o(e)26 b(Dylan)g(run)f(well)g(on)h(the)g(VM\227e)o
(xploiting)h(the)f(greater)g(freedoms)h(of)f(a)e(dangerous)448
2379 y(implementation)j(substrate)f(such)e(as)f(C.)589
2492 y(Note)35 b(that)h(this)g(technique)h(is)e(mostly)h(concerned)i
(with)d(describing)j(programs,)h(not)448 2605 y(data.)63
b(It)35 b(doesn')n(t)i(help)e(us)g(tune)g(data)h(representations.)67
b(F)o(or)34 b(e)o(xample,)k(to)c(address)j(the)448 2718
y(Scheme)30 b(arithmetic)i(boxing)g(problem,)g(we)d(need)i(the)f
(immediate-descriptor)35 b(technique)448 2831 y(described)26
b(earlier)-5 b(.)448 3080 y Fc(3.3)99 b(Compiler)l(-oriented)27
b(micr)n(ocode)448 3255 y Fi(F)o(ahlman')-5 b(s)29 b(proposal)i(pro)o
(vides)f(an)e(e)o(xtensible)j(method)e(for)f(breaking)j(free)d(of)g
(the)h(limits)448 3367 y(imposed)38 b(by)f(the)g(current)h(VM')-5
b(s)36 b(CISC,)f(Ja)n(v)n(a-focused)40 b(design.)70 b(Ho)n(we)n(v)o(er)
l(,)40 b(there)d(is)g(a)448 3480 y(serious)d(problem)g(with)e(the)g
(proposal)j(as)d(it)g(stands:)48 b(it)32 b(is)g(oriented)i(to)n(w)o
(ards)f(interpreter)448 3593 y(implementations)d(of)c(the)h(VM,)e(not)h
(compiler)i(\(or)f(other\))g(implementations.)41 b(This)26
b(limits)448 3706 y(ef)n(\002cienc)o(y)-6 b(.)49 b(The)29
b(Ja)n(v)n(a)i(byte-codes)i(are)d(designed)i(to)e(allo)n(w)g(them)f(to)
h(be)g(translated)j(\223on-)448 3819 y(the-\003y\224)e(into)f(ef)n
(\002cient)g(nati)n(v)o(e)h(code)f(when)g(the)o(y)g(are)f(loaded)j(of)n
(f)d(the)h(netw)o(ork.)48 b(But)29 b(our)448 3932 y(ne)n(w)21
b(instructions)j(are)e(described)h(to)e(the)g(Ja)n(v)n(a)h(engine)h
(with)e(C)f(code)h(or)g(some)h(routines)h(that)448 4045
y(are)j(deli)n(v)o(ered)i(to)d(the)h(VM)e(simply)j(as)e(a)g(chunk)i(of)
f(ra)o(w)e(nati)n(v)o(e)j(machine)g(code.)35 b(Ho)n(w)25
b(will)448 4158 y(the)g(VM')-5 b(s)24 b(byte-code)j(translator)g(be)e
(able)g(to)g(translate)h(the)f(use)g(of)g(such)g(an)g(instruction)i(to)
448 4271 y(nati)n(v)o(e)e(code?)589 4384 y(A)20 b(simple)i(answer)f(is)
g(just)h(to)f(translate)i(each)f(use)f(of)g(the)g(instruction)j(into)e
(a)e(subroutine)448 4497 y(call)27 b(to)e(the)h(machine-code)j
(subroutine)g(that)d(de\002nes)h(it.)35 b(This)26 b(technique)i(is)e
(adequate)i(for)448 4609 y(v)o(ery)20 b(lar)n(ge-granularity)25
b(instructions,)f(such)c(as)f(FFT)f(\(to)h(choose)j(an)d(e)o(xtreme)h
(e)o(xample\),)h(or)448 4722 y(perhaps)28 b(method)e(lookup)i(in)d
(some)h(comple)o(x)h(object-oriented)j(language.)37 b(The)26
b(o)o(v)o(erhead)448 4835 y(of)32 b(the)h(subroutine)i(call)d(will)g
(be)g(amortised)i(by)e(the)g(time)g(spent)h(e)o(x)o(ecuting)h(the)e
(instruc-)448 4948 y(tion.)44 b(This)28 b(o)o(v)o(erhead)i(is)e
(unacceptable,)33 b(ho)n(we)n(v)o(er)l(,)c(for)g(\223little\224)h
(instructions,)i(such)d(as)f(an)1920 5225 y(7)p eop
%%Page: 8 8
8 7 bop 448 573 a Fi(o)o(v)o(er\003o)n(w-checking)28
b(add-with-trap)h(instruction.)37 b(Unfortunately)-6
b(,)29 b(these)d(instructions)j(are)448 686 y(also)24
b(quite)h(important)g(for)f(ef)n(\002cient)g(implementations)j(of)d
(dynamic)g(languages.)589 799 y(This)h(leads)g(us)f(to)g(a)g(compiler)n
(-oriented)29 b(v)n(ariant)d(of)e(F)o(ahlman')-5 b(s)25
b(microcode)h(proposal.)448 912 y(Let)34 b(us)g(de\002ne)g(some)g(lo)n
(wer)n(-le)n(v)o(el)i(machine)f(underlying)i(the)e(VM\227such)f(as)g(a)
g(generic)448 1024 y(RISC)28 b(processor)j(with)e(operations)j
(described)g(in)d(a)g(simple)h(R)-5 b(TL)26 b(language.)48
b(F)o(or)28 b(e)o(xam-)448 1137 y(ple,)34 b(we)d(could)h(use)g(an)g(R)
-5 b(TL)29 b(representation)36 b(similar)c(to)f(the)h(one)g(that)g(is)g
(emplo)o(yed)h(for)448 1250 y(the)d(intermediate)j(representation)h(of)
29 b(the)h(gcc)g(compiler)-5 b(.)49 b(Note)30 b(that)g(the)g(R)-5
b(TL)27 b(language)448 1363 y(is)35 b(a)e(dangerous)38
b(language,)h(not)c(a)f(restricted,)39 b(safe)c(one\227it)g(is)f(the)h
(dangerous,)40 b(trusted)448 1476 y(machinery)26 b(we)c(use)i(to)g
(de\002ne)g(our)g(safe)g(b)n(uilding)i(blocks.)589 1589
y(Ne)n(w)19 b(instructions)24 b(are)c(de\002ned)h(with)f(macros)h(that)
f(e)o(xpand)i(from)e(a)f(use)i(of)f(the)g(instruc-)448
1702 y(tion)31 b(to)e(its)h(implementation)j(in)d(R)-5
b(TL.)27 b(If)i(the)h(instruction)j(is)d(simple,)h(such)g(as)f
(add-with-)448 1815 y(trap,)24 b(then)f(the)g(macro)g(e)o(xpands)i
(into)f(a)e(small)h(quantity)i(of)e(R)-5 b(TL)20 b(which)j(directly)i
(performs)448 1928 y(the)j(operation)i Fe(in)d(toto)p
Fi(.)40 b(If)27 b(the)h(instruction)i(is)d(comple)o(x,)i(such)f(as)g
(method)g(lookup)h(for)e(an)448 2041 y(object-oriented)g(language,)d
(then)e(the)g(macro)g(e)o(xpands)i(into)e(a)f(subroutine)k(call)d(to)g
(a)f(shared)448 2154 y(microcode)32 b(routine)g(that)f(does)g(the)f
(operation.)51 b(The)29 b(shared)j(microcode)g(routine)g(is)e(also)448
2267 y(described)c(with)e(the)g(dangerous)i(R)-5 b(TL)21
b(sublanguage.)589 2379 y(No)n(w)e(an)g(application)k(that)e(uses)f
(instruction-set)k(e)o(xtensions)e(has)e(multiple)h(implemen-)448
2492 y(tation)k(possibilities:)585 2654 y Ff(\017)46
b Fi(A)18 b(compiling)k(implementation)h(that)e(runs)g(on)f(a)g(stock)h
(microprocessor)i(can)e(e)o(xpand)676 2767 y(instruction)31
b(uses)f(appearing)h(in)e(the)g(byte-codes)j(into)d(R)-5
b(TL)27 b(and)i(then)g(translate)i(to)676 2880 y(nati)n(v)o(e)j(code)h
(using)h(standard)g(compiler)f(technology)-6 b(.)64 b(\(The)34
b(basic)h(Ja)n(v)n(a)f(VM)f(in-)676 2993 y(structions)25
b(can)e(be)g(specially)i(handled)g(by)e(the)g(translator)i(for)e(f)o
(ast)g(translation.\))32 b(W)-7 b(e)676 3105 y(trust)24
b(the)g(macro-e)o(xpanders)k(to)23 b(generate)j(safe)e(uses)h(of)e(the)
h(dangerous)j(R)-5 b(TL\227that)676 3218 y(is)26 b(the)h(trust)h
(requirement,)h(and)e(it)g(is)f(also)i(the)f(little)g(e)o(xtra)h(de)o
(gree)f(of)g(freedom)h(that)676 3331 y(gi)n(v)o(es)c(us)f(ef)n
(\002cienc)o(y)-6 b(.)585 3509 y Ff(\017)46 b Fi(A)22
b(hardw)o(are)j(Ja)n(v)n(a)f(engine)h(w)o(ould)f(simply)h(implement)f
(the)g(R)-5 b(TL)21 b(engine)k(as)f(well.)585 3686 y
Ff(\017)46 b Fi(A)26 b(byte-code)k(interpreter)h(that)d(does)h(not)f
(translate)i(to)d(nati)n(v)o(e)i(code)f(can)g(either)h(e)o(x-)676
3799 y(pand)21 b(all)g(the)g(e)o(xtended)h(instructions)i(to)d(R)-5
b(TL,)17 b(or)k(macro-e)o(xpand)i(a)d(canonical)j(code)676
3912 y(sequence)h(for)e(a)f(particular)j(instruction)h(\(such)e(as)e
(add-with-trap\),)k(producing)g(a)c(lit-)676 4024 y(tle)i(subroutine)k
(for)c(the)h(interpreter)j(to)c(call)h(on)g(each)g(use)g(of)f(that)h
(instruction.)589 4186 y(W)-7 b(e)29 b(can)g(limit)h(our)f(macro)h
(language)h(as)f(we)e(please\227it)j(doesn')n(t)g(ha)n(v)o(e)f(to)g(be)
f(T)l(uring)448 4299 y(equi)n(v)n(alent.)589 4412 y(The)36
b(main)g(point)g(of)g(this)h(proposal)h(is)d(that)i(if)e(we)g(choose)i
(to)f(mak)o(e)g(the)g(Ja)n(v)n(a)h(VM)448 4525 y(e)o(xtensible,)29
b(we)c(must)h(be)h(careful)g(in)f(choosing)j(ho)n(w)c(we)g(e)o(xpress)j
(these)f(e)o(xtensions.)39 b(The)448 4638 y(e)o(xtensions)d(should)g
(be)d(described)j(in)e(some)f(form)h(that)g(is)f(amenable)i(to)e(a)g
(spectrum)i(of)448 4751 y(implementation)40 b(strate)o(gies;)45
b(a)37 b(form)f(which)h(our)g(computer)h(systems)g(can)f(manipulate)448
4863 y(ef)n(\002caciously)-6 b(.)52 b(C)29 b(source)j(and)f(processor)n
(-speci\002c)k(machine)d(code)f(do)g(not)f(satisfy)i(these)448
4976 y(requirements.)1920 5225 y(8)p eop
%%Page: 9 9
9 8 bop 589 573 a Fi(This)28 b(e)o(xtension)i(mechanism)f(is)e(clearly)
j(less)e(well-de)n(v)o(eloped)j(than)d(the)g(immediate-)448
686 y(descriptor)c(technique)g(presented)g(in)e(the)f(\002rst)g(half)h
(of)g(this)f(note.)29 b(Much)22 b(detail)g(needs)h(to)e(be)448
799 y(de)n(v)o(eloped,)h(such)e(as)f(the)g(e)o(xact)g(design)i(of)e
(the)g(R)-5 b(TL)16 b(language)21 b(used)f(for)f(de\002ning)h(e)o
(xtended)448 912 y(instructions,)28 b(or)c(the)g(associated)j
(instruction)h(meta-information)f(used)e(to)g(describe)h(to)e(the)448
1024 y(byte-code)i(v)o(eri\002er)e(the)g(static)h(type)f(constraints)j
(of)c(the)h(de\002ned)g(instructions.)448 1317 y Fj(4)120
b(Conclusion)448 1524 y Fi(Using)24 b(the)f(Ja)n(v)n(a)g(VM)f(as)g(a)h
(propagation)j(v)o(ector)e(for)f(distrib)n(uting)j(dynamic)e(languages)
i(out)448 1637 y(to)21 b(a)g(lar)n(ge)h(audience)i(is)d(a)f(tempting)j
(goal.)28 b(W)-7 b(e')i(v)o(e)22 b(e)o(xamined)g(tw)o(o)f(dif)n
(\002culties)i(with)d(tar)n(get-)448 1750 y(ing)25 b(dynamic)h
(languages)h(to)e(the)g(current)h(Ja)n(v)n(a)f(VM:)f(the)h(o)o(v)o
(erhead)h(of)f(boxing)h(small)f(data)448 1863 y(structures,)k(and)d
(the)g(mismatch)g(between)h(the)f(VM')-5 b(s)25 b(Ja)n(v)n(a-tuned)j
(instruction)h(set)d(and)g(the)448 1976 y(requirements)i(of)d(dynamic)h
(languages.)36 b(The)25 b(former)h(problem)g(can)f(be)g(addressed)j
(with)d(a)448 2089 y(simple,)j(backw)o(ards-compatible)j(e)o(xtension)e
(to)d(the)h(VM.)d(It)i(appears)i(that)f(this)g(e)o(xtension)448
2202 y(should)35 b(ha)n(v)o(e)f(no)g(performance)i(impact)e(on)f
(current)i(Ja)n(v)n(a)f(programs.)60 b(The)33 b(latter)h(prob-)448
2314 y(lem)c(can)g(be)g(addressed)i(with)e(the)g(more)g(speculati)n(v)o
(e)i(proposal)g(of)e(adding)h(an)f(e)o(xtension)448 2427
y(mechanism)25 b(to)f(the)f(VM)g(that)h(is)f(amenable)i(to)f(compiler)g
(processing.)448 2720 y Fj(Bibliograph)n(y)448 2927 y
Fi([ALIT])246 b(Peter)24 b(Lee)f(\(editor\).)962 3040
y Fe(T)-8 b(opics)24 b(in)f(Advanced)i(Langua)o(g)o(e)h
(Implementation.)962 3153 y Fi(MIT)c(Press,)i(1991.)448
3348 y([Dylan])233 b Fe(Dylan:)30 b(An)22 b(Object-Oriented)27
b(Dynamic)d(Langua)o(g)o(e)o(.)962 3460 y Fi(Apple)g(Computer)l(,)g
(1992.)448 3655 y([F)o(ahlman96])48 b(Scott)24 b(E.)e(F)o(ahlman.)962
3768 y(Email)i(to)h(the)h Fd(java-vm@life-ai.mit.edu)18
b Fi(mailing)26 b(list,)f(January)i(10,)1098 3881 y(1996.)i(The)e
Fd(java-vm)e Fi(mailing)j(list)g(is)f(archi)n(v)o(ed)i(at)f(the)g(MIT)e
(AI)g(Lab;)1098 3994 y(this)j(message)h(can)f(be)f(located)j(at)d
Fd(http://wilson.ai.mit.edu)o(/)1098 4107 y(java-vm?37)448
4302 y Fi([Ja)n(v)n(a])298 b(Ja)n(v)n(a:)30 b(Programming)25
b(for)e(the)h(Internet.)962 4414 y(Sun)f(Microsystems,)j(1995.)e
Fd(http://java.sun.com/)448 4609 y Fi([Scheme])167 b(J.)23
b(Rees)g(and)h(W)-8 b(.)22 b(Clinger)j(\(editors\).)962
4722 y(The)e(re)n(vised)1386 4686 y Fa(3)1449 4722 y
Fi(report)h(on)g(the)g(algorithmic)i(language)g(Scheme.)962
4835 y Fe(SIGPLAN)21 b(Notices)k Fi(21\(12\):37\22679,)i(December)d
(1986.)1920 5225 y(9)p eop
%%Trailer
end
userdict /end-hook known{end-hook}if
%%EOF
